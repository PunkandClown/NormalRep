<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link href="http://10.1.0.48:1337/CSS" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="reg">
        <div class="form">
                <p>
                    <label for="name">Enter your name</label> <br>
                        <input type="name" id="name">
                </p>

                <p>
                    <label for="NN" id="Nickname">Enter your nickName</label> <br>
                        <input type="nickName" id="NN">
                </p>
                <p>
                    <label for="pass">Enter password</label> <br>
                        <input type="password" id="pass">
                </p>
        
                <div class="sub">
                    <button onclick="start()">Зарегестрироваться</button>
                </div>    
        </div>
    </div>
</body>
    <script>
        let xhr = new XMLHttpRequest();

        function start () {
            let name = document.getElementById('name').value;
            let NN = document.getElementById('NN').value;
            let pass = document.getElementById('pass').value;


            xhr.open('POST', 'http://10.1.0.48:1337/text');

            let sending = '{' + name + ',' + NN + ',' + pass + '}';

            xhr.send(sending)

            xhr.onload = function () {
                console.log(xhr.status);
                console.log(xhr.responseText);
                if (xhr.status === 200) {
                    alert('Регистрация прошла успешна!');
                    window.location.href = '/login';
                } else {
                    alert('Такой пользователь уже есть!');
                    window.location.href = '/login';
                }
            }
            
        }
        

        
    </script>
</html>